<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/_template-aside.xhtml"
								xmlns="http://www.w3.org/1999/xhtml"
								xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
								xmlns:f="http://java.sun.com/jsf/core"
								xmlns:h="http://java.sun.com/jsf/html"
								xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
								xmlns:t="http://myfaces.apache.org/tomahawk"
								xmlns:cc="http://java.sun.com/jsf/composite/custom-components">
	<ui:define name="main">
		<h2>#{texts.GameAccountTitle}</h2>
		<h:dataTable value="#{loginBean.user.bets}" var="bet" class="table table-striped table-condensed">
			<h:column>
				<f:facet name="header">
					#{texts.GameTeam1Label} / #{texts.GameTeam2Label}<br />
					<em>#{texts.GameStartTimeLabel} (#{loginBean.formatTimeZoneUser(loginBean.timeZone, false)})</em>
				</f:facet>
				<h:link outcome="/players/game.xhtml?id=#{bet.bet.game.id}">
					<h:outputFormat value="#{texts.GameName}">
						<f:param value="#{teams[bet.bet.game.team1.code]}" />
						<f:param value="#{teams[bet.bet.game.team2.code]}" />
					</h:outputFormat>
				</h:link><br />
				<em><time datetime="#{loginBean.formatDateTimeISO(bet.bet.game.startTimeZoned)}">#{loginBean.formatDateTimeUser(bet.bet.game.startTimeZoned, false)}</time></em>
				<f:facet name="footer">#{texts.GameNofBetsLabel}: #{loginBean.formatNumberUser(gameBean.userBetStatistics.numberOfBets)}</f:facet>
			</h:column>
			<h:column>
				<f:facet name="header">#{texts.GameBetDescriptionLabel}</f:facet>
				<h:outputFormat value="#{bets[bet.bet.type.code]}">
					<f:param value="#{teams[bet.bet.team.code]}" />
					<f:param value="#{bet.bet.time}" />
					<f:param value="#{bet.bet.number}" />
				</h:outputFormat>
			</h:column>
			<h:column>
				<f:facet name="header">
					#{texts.GameBetStakeLabel} &#8901; #{texts.GameBetOddsLabel}<br />
					(#{texts.CurrencyLong})
				</f:facet>
				#{loginBean.formatNumberUser(bet.stake)} &#8901; #{loginBean.formatNumberUser(bet.bet.odds)}
			</h:column>
			<h:column>
				<f:facet name="header">#{texts.GameBetOccurredLabel}</f:facet>
				<span class="text-#{empty bet.bet.occurred ? 'muted' : bet.bet.occurred ? 'success' : 'danger'}">#{empty bet.bet.occurred ? texts.NotAvailable : bet.bet.occurred ? texts.BooleanTrue : texts.BooleanFalse}</span>
				<f:facet name="footer">
					<span class="text-success">#{loginBean.formatPercentUser(gameBean.userBetStatistics.betsPercentageWon)}</span> /
					<span class="text-danger">#{loginBean.formatPercentUser(gameBean.userBetStatistics.betsPercentageLost)}</span>
				</f:facet>
			</h:column>
			<h:column>
				<f:facet name="header">
					#{texts.GameBetAmountWonLabel}<br />
					(#{texts.CurrencyLong})
				</f:facet>
				<h:outputText rendered="#{empty bet.bet.occurred}" class="text-muted" value="#{texts.NotAvailable}" />
				<h:panelGroup rendered="#{not empty bet.bet.occurred}" class="text-#{bet.bet.occurred ? 'success' : 'danger'}">
					<em>#{loginBean.formatNumberUser(bet.deposit)}* - #{loginBean.formatNumberUser(bet.stake)}&#8224;</em>
					<br />= #{loginBean.formatNumberUser(bet.gain)}&#8225;
				</h:panelGroup>
				<f:facet name="footer">
					<span class="text-success">#{loginBean.formatNumberUser(gameBean.userBetStatistics.betsAmountWon)}</span>
					<span class="text-danger">- #{loginBean.formatNumberUser(gameBean.userBetStatistics.betsAmountLost)}</span><br />
					<span class="text-#{gameBean.userBetStatistics.betsAmountSum ge 0 ? 'success' : 'danger'}">= #{loginBean.formatNumberUser(gameBean.userBetStatistics.betsAmountSum)}&#8225;</span>
				</f:facet>
			</h:column>
		</h:dataTable>
	</ui:define>
	<ui:define name="aside">
		<dl class="well">
			<dt>#{texts.LoginLoginLabel}</dt>
			<dl>#{loginBean.login}</dl>
			<dt>#{texts.LoginManagerLabel}</dt>
			<dl>#{loginBean.user.manager ? texts.BooleanTrue : texts.BooleanFalse}</dl>
			<dt>#{texts.LoginLocaleLabel}</dt>
			<dl>#{loginBean.locale} - #{loginBean.locale.getDisplayName(loginBean.locale)}</dl>
			<dt>#{texts.LoginTimeZoneLabel}</dt>
			<dl>#{loginBean.formatTimeZoneUser(loginBean.timeZone, true)}</dl>
		</dl>
		<dl class="well">
			<dt>#{texts.GameAccountBalanceLabel}</dt>
			<dl class="text-#{loginBean.user.balance ge 0 ? 'success' : 'danger'}">#{loginBean.formatNumberUser(loginBean.user.balance)} #{texts.Currency}</dl>
			<dt>#{texts.GameNofBetsLabel}</dt>
			<dl>#{loginBean.formatNumberUser(gameBean.userBetStatistics.numberOfBets)}</dl>
			<dt>#{texts.GameBetPercentageWonLabel}</dt>
			<dl class="text-success">#{loginBean.formatPercentUser(gameBean.userBetStatistics.betsPercentageWon)}</dl>
			<dt>#{texts.GameBetAmountWonLabel}</dt>
			<dl class="text-success">#{loginBean.formatNumberUser(gameBean.userBetStatistics.betsAmountWon)} #{texts.Currency}</dl>
			<dt>#{texts.GameBetAmountLostLabel}</dt>
			<dl class="text-danger">#{loginBean.formatNumberUser(gameBean.userBetStatistics.betsAmountLost)} #{texts.Currency}</dl>
			<dt>#{texts.GameBetAmountSumLabel}</dt>
			<dl class="text-#{gameBean.userBetStatistics.betsAmountSum ge 0 ? 'success' : 'danger'}">#{loginBean.formatNumberUser(gameBean.userBetStatistics.betsAmountSum)} #{texts.Currency}</dl>
		</dl>
		<ul class="well list-unstyled text-muted">
			<li>*#{texts.GameBetAmountDepositLabel}</li>
			<li>&#8224;#{texts.GameBetStakeLabel}</li>
			<li>&#8225;#{texts.GameBetAmountWonLabel}</li>
		</ul>
	</ui:define>
</ui:composition>
