<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/_template-aside.xhtml"
								xmlns="http://www.w3.org/1999/xhtml"
								xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
								xmlns:f="http://java.sun.com/jsf/core"
								xmlns:h="http://java.sun.com/jsf/html"
								xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
								xmlns:t="http://myfaces.apache.org/tomahawk"
								xmlns:cc="http://java.sun.com/jsf/composite/custom-components">
	<ui:define name="main">
		<h2>#{texts.GameAccountTitle}</h2>
		<h:dataTable value="#{loginBean.user.bets}" var="bet" class="table table-striped table-condensed">
			<h:column>
				<f:facet name="header">
					#{texts.GameTeam1Label} / #{texts.GameTeam2Label}<br />
					<em>#{texts.GameStartTimeLabel} (#{loginBean.formatTimeZoneUser(loginBean.timeZone, false)})</em>
				</f:facet>
				<h:link outcome="/players/game.xhtml?id=#{bet.bet.game.id}">
					<h:outputFormat value="#{texts.GameName}">
						<f:param value="#{teams[bet.bet.game.team1.code]}" />
						<f:param value="#{teams[bet.bet.game.team2.code]}" />
					</h:outputFormat>
				</h:link><br />
				<em><time datetime="#{loginBean.formatDateTimeISO(bet.bet.game.startTimeZoned)}">#{loginBean.formatDateTimeUser(bet.bet.game.startTimeZoned, false)}</time></em>
				<f:facet name="footer"><em>#{texts.GameNofBetsLabel}:</em> #{loginBean.formatNumberUser(gameBean.userNumberOfBets)}</f:facet>
			</h:column>
			<h:column>
				<f:facet name="header">#{texts.GameBetDescriptionLabel}</f:facet>
				<h:outputFormat value="#{bets[bet.bet.type.code]}">
					<f:param value="#{teams[bet.bet.team.code]}" />
					<f:param value="#{bet.bet.time}" />
					<f:param value="#{bet.bet.number}" />
				</h:outputFormat>
			</h:column>
			<h:column>
				<f:facet name="header">
					#{texts.GameBetStakeLabel} &#8901; #{texts.GameBetOddsLabel}<br />
					<em>(#{texts.CurrencyLong})</em>
				</f:facet>
				#{loginBean.formatNumberUser(bet.stake)} &#8901; #{loginBean.formatNumberUser(bet.bet.odds)}
				<h:panelGroup rendered="#{not empty bet.bet.occurred}" class="text-#{bet.bet.occurred ? 'success' : 'danger'}"><br />= #{loginBean.formatNumberUser(bet.gain)}</h:panelGroup>
				<f:facet name="footer">
					<span class="text-success">#{loginBean.formatNumberUser(gameBean.userBetsAmountWon)}</span>
					<span class="text-danger">- #{loginBean.formatNumberUser(gameBean.userBetsAmountLost)}</span><br />
					<strong class="text-#{gameBean.userBetsAmountSum ge 0 ? 'success' : 'danger'}">= #{loginBean.formatNumberUser(gameBean.userBetsAmountSum)}</strong>
				</f:facet>
			</h:column>
			<h:column>
				<f:facet name="header">#{texts.GameBetOccurredLabel}</f:facet>
				<span class="text-#{bet.bet.occurred ? 'success' : 'danger'}">#{bet.bet.occurred ? texts.BooleanTrue : texts.BooleanFalse}</span>
				<f:facet name="footer">
					<span class="text-success">#{loginBean.formatPercentUser(gameBean.userBetsPercentageWon)}</span> /
					<span class="text-danger">#{loginBean.formatPercentUser(gameBean.userBetsPercentageLost)}</span>
				</f:facet>
			</h:column>
		</h:dataTable>
	</ui:define>
	<ui:define name="aside">
		<dl class="well">
			<dt>#{texts.LoginLoginLabel}</dt>
			<dl>#{loginBean.login}</dl>
			<dt>#{texts.LoginManagerLabel}</dt>
			<dl>#{loginBean.user.manager ? texts.BooleanTrue : texts.BooleanFalse}</dl>
			<dt>#{texts.LoginLocaleLabel}</dt>
			<dl>#{loginBean.locale} - #{loginBean.locale.getDisplayName(loginBean.locale)}</dl>
			<dt>#{texts.LoginTimeZoneLabel}</dt>
			<dl>#{loginBean.formatTimeZoneUser(loginBean.timeZone, true)}</dl>
		</dl>
		<dl class="well">
			<dt>#{texts.GameAccountBalanceLabel}</dt>
			<dl>#{loginBean.formatNumberUser(loginBean.user.balance)} #{texts.Currency}</dl>
			<dt>#{texts.GameNofBetsLabel}</dt>
			<dl>#{loginBean.formatNumberUser(gameBean.userNumberOfBets)}</dl>
			<dt>#{texts.GameBetPercentageWonLabel}</dt>
			<dl class="text-success">#{loginBean.formatPercentUser(gameBean.userBetsPercentageWon)}</dl>
			<dt>#{texts.GameBetAmountWonLabel}</dt>
			<dl class="text-success">#{loginBean.formatNumberUser(gameBean.userBetsAmountWon)} #{texts.Currency}</dl>
			<dt>#{texts.GameBetAmountLostLabel}</dt>
			<dl class="text-danger">#{loginBean.formatNumberUser(gameBean.userBetsAmountLost)} #{texts.Currency}</dl>
			<dt>#{texts.GameBetAmountSumLabel}</dt>
			<dl class="text-#{gameBean.userBetsAmountSum ge 0 ? 'success' : 'danger'}">#{loginBean.formatNumberUser(gameBean.userBetsAmountSum)} #{texts.Currency}</dl>
		</dl>
	</ui:define>
</ui:composition>
